<!--
	THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/en/editor.html?c=map-usa&code=LYTwwgFghgTgLgOgM4QPYHcAyqoBMCWAdgOYAUAlANwBQAJAsQKZykBKA8uwCoD6ACgEEuACQAEAalEByAPS4ocKDKhIkzGU1Qz0qGABtcCAFZJUhKQBpRAMwCuhAMZx8Z0aVtIoAKVOFyogG9qUVFQSFhECHxcRmw8IjIqYNFGB2h4JAQYRmJ8JDhGGABZKAAHUikAVQBlAUtRD29fKyCQkIE9FQBrKAAuQOS20T1Gazh-gFoARgBmKYtBtrhUUv6AJgBWBaGQ9Gi4CH6pjcWAX2224Sh0KHx8ftadkbHJqamABguh5dXRNYAOL5tPa4A79E5Dc6LKR8WyFZaiVj4ByoKQPRYhZ7jUQTADsADYgSEfutCRjRCCwX8zslTklBvQmHAvNV2AA5CoAIVYE0YAA9SrpFCjGEgePhgIL4FARWK1u9NsZfPU7I5nGZSPJFP5HiEZDJRABRPmMSV6VD9Uo5WCieS4VBIW2MURTACcrtxixRhHyogARlA9PLNqIALy2hRQBCcgSYADaACJgxsEwBdGhDb2-tIRAAikbD_sDyfJCGs-D0BRgpHwBWAYYAfKJa6aEIQoMBGORS8AyjW6423Lqdu3O_0W8A2x3GES2gA3QNw8d1hAeHgLvRw0T60SoWzNlddYg8dCMfDECBwcl0pKQ-khFbqwiF4fOOAjdE7UQFPnYqQANVQTdOydI0BSFKAAHOAFfRVtVBRE5GAVArFJ62DGZLHJJBbD9H8_wAMTMAp-iKIg8jgABLmAXAjI1vVQYB8CgLCvyxfopAcRhCCrKQziBZYgOcX5h2JGjiCYGAOInVidhQDBc0YToQH6T5yTgZCfVrFxCFzWxkKfVSEDWfjFjnPJbEDEoRPJdjpHEy9ZKGJjCHBd53Pc2dez5foZn-DyPNnIhWCgEhGE_L9RBRc0pNEONySGKQAGI5hmfFXQ2JzIuSgAWDZcQ2P0cqyr9ktxHK8FwKYSp2ZKoD9XBXUYV0asSpLGHeawZmsf5WraZLrEG6w_WsPqQgGxgOtdd4xukJLrHkRh8Wq2c2usHL8VwHLMNW_qktwXEZgVXFZrqjZ3LWfE-Mi0RU2vWd8P6OMpGEc8IHqKRsHQKRU1nBxAwcWxOj9D9vxgOFTO-VAgL9VAfIGL95PQfoNLhWd9V0fBuL_Od4WRQMarsqQsRqklpB-GrrEYBR9PChHIq1KB_yx5HAlEbI8HYQg9BUmxAzUUQoRu7J8l0OmAiFyLPFxgQkAASV7JgHlOa9IbaNQaNFJ7yVEtpRzpqpalEPgVkNfIJQUUU-rgEArQ43tSj6mAcGAFHwZnBLQjKDiajqXbTVKaAkDyCKbuBpTQ5u0QkbdiGo8Fz3Ja_RntfjgJRH1jiOnqjsWKsDcl1EHL_jWDDBd2kJ08z6Rs6QHp6gLunDqmHKctdcvPcrjPpyzmiAC8zDz0RG_6fENg2GZNg2Du0-7sca5gHofRUBvFzptZXTb2YphnqOq576QwEDfBrF0QhmNXzc6b894cpbo7d5u_f56kMAgN0PBUXztfwSmf4CpLo_SKz8DZv0IIQVIzhAZwEvoXGYGxpozByriIBX4QEcUUp0G42RYF01dFMXE7xXRrFQTsdB0hcwURok4Xc1hRBv2An6C-38r6j0nuw0hQxyFSAIjFaIQ8R4uldHMAq-J_icLaNwgA4owXQuQBE_1EO6N0m9p5J2AXPA2Vwbh3FwUcGYxDUoSK7tXKQct5BoD0S6BB-UATGLZqYuWeg9BEFQHkKxUwAQFSnvY7hctCAEFCgo1hogx4zEOkg3xmiOJywwMEuB7xyp_3xFE0xABpUKngkBWIBP8BB7w1EVwcQfKQaTsa2AcF0EAVjtr-TvoUzuxSX7YFsHkZi7Yan4neH_YRqSSklCIIwDxk98HEL6S_EoMAQCdACVYjY_x_h5XxDMcZBsSiqBlBADwzA4DZJYYXfE-INotxyqsjiZE0jnlClY10CyZhpXeGc6QZFwGilQIoOZ4T8EGKeVIMiqg8jB1KKUfAOTblt0ur8_5ph9Kgv2XTLpaw3QLKhcRIJHj3IbBbjvdRaDonSDZIwP0yE67xLpn_ceGwQy4rIfiqQhKFzyByQA4ROKincMJegUQVxJQoHwDg-F-j5S4j_r8zlogvCFDUNUwVogFlHPyWKxgXKij8mRF_Yeij5R5InuImlXC6XioAJq6C6B4jKhDLpssaRyoUEB6GwCAkQMl_QPRUsSSs_VkjDV2tEPmLo7yXWhPdPiOxXqTElPYFEDVgi3gbFbqXBps9THsC6J0NAvYrF-RbiXR54amkG3YNkYgZgs3_HdPAz17K6V8G4j6aZC5z5Bs8QSStKT83cNYGgGIog5ZIBmbgDF50N4kI7XS6oe4DgOudi4jpsrkFrHCYu35E7bBTv9YGqx_x7nwNOWO0xXA62ijUEM2VCrQ3bV-YevkK9ZWXQKcQ94VabV0sqIod6d6dVeN-f-QowBiJWNDV0t4P7-W5CbVuil_x8QoP3SUgA6ioKIJBljmDPeWwhnjfnwdFHAUQzMYDgeYZqkJFL42zGw3kLMRA5m4kugYvV1bTHwZAIxBItGjlYbgy_WE8IEJIhRFmw5hDFkJxundL8KshgScFhmUI4B0iIDUHAdgpQnykEfDpJIdJKBAA
	⚠ Please be aware that this chart is not an official demo of Apache ECharts but is made by user-generated code.
-->
<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 60%"></div>
  <div id="lineChart" style="height: 40%;"></div>

  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/jquery@3.7.1/dist/jquery.min.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  
  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/echarts-gl/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/echarts-stat/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-graph-modularity extension
  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/echarts-graph-modularity/dist/echarts-graph-modularity.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    //var app = {};
    //var ROOT_PATH = 'https://echarts.apache.org/examples';
    //var option;
    var lineDom = document.getElementById('lineChart');
    var lineChart = echarts.init(lineDom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });

    myChart.showLoading();
$.getJSON('world.json', function (usaJson) {
  myChart.hideLoading();
  echarts.registerMap('USA', usaJson, {
    Alaska: {
      left: -131,
      top: 25,
      width: 15
    },
    Hawaii: {
      left: -110,
      top: 28,
      width: 5
    },
    'Puerto Rico': {
      left: -76,
      top: 26,
      width: 2
    }
  });

   $.getJSON('BR-exportacoes_importacoes_2025.json', function(data) {
    const bal2025 = data.BAL["2025"];
    const chartData = bal2025
      .filter(item => item.name)
      .map(item => ({
        name: item.name,
        value: item.us_value // ou item.kg_weight
      }));

  var option = {
    title: {
      text: 'Volume de Exportações do Brasil em 2023',
      subtext: 'Fonte: Ministério da Economia',
      left: 'center'
    },
    tooltip: {
      trigger: 'item',
        formatter: function(params) {
          return params.name + '<br/>Exportações: US$ ' + params.value.toLocaleString();
        }
    },
    visualMap: {
      left: 'right',
        min: 0,
        max: Math.max(...chartData.map(d => d.value / 100000000)),
        inRange: {
          color: [
            '#313695', '#4575b4', '#74add1', '#abd9e9',
            '#e0f3f8', '#ffffbf', '#fee090', '#fdae61',
            '#f46d43', '#d73027', '#a50026'
          ]
        },
        text: ['Maior', 'Menor'],
        calculable: true
    },
    toolbox: {
      show: true,
      //orient: 'vertical',
      left: 'left',
      top: 'top',
      feature: {
        dataView: { readOnly: false },
        restore: {},
        saveAsImage: {}
      }
    },
    series: [
      {
        
          name: 'Exportações',
          type: 'map',
          roam: true,
          map: 'USA',
          emphasis: {
            label: { show: true }
          },
          data: chartData
        }
      ]
    };
    myChart.setOption(option);

    const anos = [];
    for (let ano = 1997; ano <= 2025; ano++) {
      anos.push(ano);
    }

  function getSoma(tipo) {
        return anos.map(ano => {
          const paises = data[tipo][ano];
          const soma = paises.reduce((acc, p) => acc + (p.us_value || 0), 0);
          return soma / 1e9;
        });
      }

      const balValores = getSoma('BAL');
      const impValores = getSoma('IMP');
      const expValores = getSoma('EXP');

      var lineDom = document.getElementById('lineChart');
      var lineChart = echarts.init(lineDom, null, {
        renderer: 'canvas',
        useDirtyRect: false
      });
      var lineOption = {
        title: {
          text: 'Balança Comercial do Brasil (2000-2025)',
          subtext: 'Fonte: Ministério da Economia',
          left: 'center'
        },
        tooltip: {
          trigger: 'axis'
        },
        legend: {
          data: ['Balança Comercial', 'Importações', 'Exportações'],
          top: 30
        },
        toolbox: {
          feature: {
            dataView: { readOnly: false },
            restore: {},
            saveAsImage: {}
          }
        },
        xAxis: {
          type: 'category',
          boundaryGap: false,
          data: anos
        },
        yAxis: {
          type: 'value',
          axisLabel: {
            formatter: '{value} B$'
          }
        },
        series: [
          {
            name: 'Balança Comercial',
            type: 'line',
            data: balValores,
            smooth: true,
            lineStyle: { width: 3 }
          },
          {
            name: 'Importações',
            type: 'line',
            data: impValores,
            smooth: true
          },
          {
            name: 'Exportações',
            type: 'line',
            data: expValores,
            smooth: true
          }
        ]
      };
      lineChart.setOption(lineOption);
    });
});
  </script>
</body>
</html>
